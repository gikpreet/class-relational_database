= SELECT 절 (SELECT clause)

* 관계 대수에서 프로젝션(Projection - π) 연산과 일치, 결과에 나타날 속성을 나열하는데 사용됨

[source, sql]
----
SELECT [DISTINCT] A1, A2 … An
----

* 형식 질의 언어는 릴레이션이 집합이라는 수학적인 개념에 바탕을 두고 있음
** 중복된 투플은 릴레이션에서 나타날 수 없음
** 중복성 제거는 시간 소비성 작업이므로, SQL은 프로젝션 결과 뿐 아니라 릴레이션에서도 중복을 허용
** 중복이 없어야 하는 결과 집합 쿼리인 경우 DISTINCT 키워드를 사용
** all 키워드를 사용하여 중복을 허용, 중복을 허용하는 것이 기본
* FROM 리스트에 나오는 테이블들로 부터 산출될 필드 이름들의 리스트
** 기호를 사용하여 모든 속성들을 사용할 수 있음
* 상수나 투플들의 속성에 적용되는 +, -, *, / 연산자를 포함하는 산술적 표현들을 사용할 수 있음
* 데이터 타입에 적용할 수 있는 산술적인 함수를 허용

---

모든 질의에는 SELECT 절이 포함되어야 하는데, SELECT 절은 관계 대수에서 프로젝션(π) 연산과 일치하며, 질의의 결과로 반환될 릴레이션의 속성(필드)을 나열하는데 사용됩니다. 질의의 결과는 SELECT 절에 나열된 속성들만으로 이루어진 릴레이션입니다.

릴레이션 인스턴스 `Passenger` 에 아래와 같은 질의를 수행하고자 할 경우

> 모든 승객의 등급과 나이를 구하라

관계 대수식으로 이를 표현하면 아래와 같습니다.

_π Grade, Age(Passenger)_

이를 투플 관계 해석으로 표현하면 아래와 같습니다.

_{ S.Grade, S.Age | ∀S ∈ Passenger) }_

이를 SQL 질의로 표현하면 아래와 같습니다.

[source, sql]
----
SELECT Grade, Age
FROM Passenger;
----

[%header, cols="1, 1" width=50%]
|===
|Grade	|Age
|1	|44
|10	|44
|7	|32
|9	|54
|9	|45
|10	|26
|8	|55
|===

다음 질의는 `Age` 속성으로만 구성된 릴레이션을 반환합니다.

> 모든 승객의 나이를 구하라

관계 대수식으로 이를 표현하면 아래와 같습니다.

_π Age(Passenger)_

이를 투플 관계 해석으로 표현하면 아래와 같습니다.

_{ S.Age | ∀S ∈ Passenger) }_

[source, sql]
----
SELECT Age
FROM   Passenger
----

결과는 아래와 같습니다.

[%header, cols="1" width=20% options=header]
|===
|Age
|44
|44
|32
|54
|45
|26
|55
|===

질의 언어는 릴레이션이 집합이라는 수학적 개념에 바탕을 두고 있으므로, 릴레이션에서 중복된 값은 표시 하지 않아야 하지만, 구현에서 중복 제거는 시간 반복적 작업이므로 SQL은 중복을 허용합니다. 결과로 생성되는 릴레이션에 중복을 포함하지 않고자 하는 경우 아래와 같이 DISTINCT 키워드를 사용합니다.

[source, sql]
----
SELECT DISTINCT Age
FROM   Passenger
----

결과는 아래와 같습니다.

[%header, cols="1" width=20% options=header]
|===
|Age
|44
|32
|54
|45
|26
|55
|===


SELECT 절은 FROM 리스트에 열거된 릴레이션에서 산출될 속성 이름들의 목록입니다.

다음 질의는 `Pilot` 릴레이션과 `Aircraft` 릴레이션의 카티션 프로덕트에서 `PilotName`, `Grade`, `AircraftNo`` 속성으로 구성된 릴레이션을 반환합니다.

[source, sql]
----
SELECT PassengerName, Grade, AircraftNo
FROM Passenger, Aircraft
----

위의 SQL 질의를 관계 대수식으로 작성하면 아래와 같이 됩니다.

_π PassengerName, Grade, AircraftNo(Passenger Ⅹ Aircraft)_

결과는 아래와 같습니다.

[%header, cols="2, 1, 1" width=50% options=header]
|===
|PassengerName	|Grade	|AircraftNo
|홍길동	|1	|105
|홍길동	|1	|104
|홍길동	|1	|103
|홍길동	|1	|102
|홍길동	|1	|101
|이순신	|10	|105
|이순신	|10	|104
|이순신	|10	|103
|이순신	|10	|102
|이순신	|10	|101
|안중근	|7	|105
|안중근	|7	|104
|안중근	|7	|103
|안중근	|7	|102
|안중근	|7	|101
|김영랑	|9	|105
|김영랑	|9	|104
|김영랑	|9	|103
|김영랑	|9	|102
|김영랑	|9	|101
|김소월	|9	|105
|김소월	|9	|104
|김소월	|9	|103
|김소월	|9	|102
|김소월	|9	|101
|윤동주	|10	|105
|윤동주	|10	|104
|윤동주	|10	|103
|윤동주	|10	|102
|윤동주	|10	|101
|천상병	|8	|105
|천상병	|8	|104
|천상병	|8	|103
|천상병	|8	|102
|천상병	|8	|101
|===

SELECT 절에 * 기호를 사용하면 FROM 리스트에 열거된 릴레이션의 모든 속성을 결과 릴레이션에 포함합니다.

다음 질의는 `Passenger` 릴레이션과 `Aircraft` 릴레이션의 카디션 프로덕트의 모든 속성으로 구성된 릴레이션을 반환합니다.

[source, sql]
----
SELECT * 
FROM Passenger, Aircraft
----

위의 SQL 질의를 관계 대수식으로 작성하면 아래와 같이 됩니다.

_(Passenger Ⅹ Aircraft)_

결과는 아래와 같습니다.

[%header, cols="1, 2, 1, 1, 1, 2, 2" width=80% options=header]
|===
|PassengerNo	|PassengerName  |Grade  |Age    |AircraftNo	    |KindOfAircraft	    |Airline
|1	            |홍길동	        |1	    |44	    |105	        |보잉 737-800	    |제주항공
|1	|홍길동	|1	|44	|104	|에어버스 A300	|대한항공
|1	|홍길동	|1	|44	|103	|에어버스 A380	|아시아나 항공
|1	|홍길동	|1	|44	|102	|보잉 727	|대한항공
|1	|홍길동	|1	|44	|101	|보잉 747	|대한항공
|2	|이순신	|10	|44	|105	|보잉 737-800	|제주항공
|2	|이순신	|10	|44	|104	|에어버스 A300	|대한항공
|2	|이순신	|10	|44	|103	|에어버스 A380	|아시아나 항공
|2	|이순신	|10	|44	|102	|보잉 727	|대한항공
|2	|이순신	|10	|44	|101	|보잉 747	|대한항공
|3	|안중근	|7	|32	|105	|보잉 737-800	|제주항공
|3	|안중근	|7	|32	|104	|에어버스 A300	|대한항공
|3	|안중근	|7	|32	|103	|에어버스 A380	|아시아나 항공
|3	|안중근	|7	|32	|102	|보잉 727	|대한항공
|3	|안중근	|7	|32	|101	|보잉 747	|대한항공
|4	|김영랑	|9	|54	|105	|보잉 737-800	|제주항공
|4	|김영랑	|9	|54	|104	|에어버스 A300	|대한항공
|4	|김영랑	|9	|54	|103	|에어버스 A380	|아시아나 항공
|4	|김영랑	|9	|54	|102	|보잉 727	|대한항공
|4	|김영랑	|9	|54	|101	|보잉 747	|대한항공
|5	|김소월	|9	|45	|105	|보잉 737-800	|제주항공
|5	|김소월	|9	|45	|104	|에어버스 A300	|대한항공
|5	|김소월	|9	|45	|103	|에어버스 A380	|아시아나 항공
|5	|김소월	|9	|45	|102	|보잉 727	|대한항공
|5	|김소월	|9	|45	|101	|보잉 747	|대한항공
|6	|윤동주	|10	|26	|105	|보잉 737-800	|제주항공
|6	|윤동주	|10	|26	|104	|에어버스 A300	|대한항공
|6	|윤동주	|10	|26	|103	|에어버스 A380	|아시아나 항공
|6	|윤동주	|10	|26	|102	|보잉 727	|대한항공
|6	|윤동주	|10	|26	|101	|보잉 747	|대한항공
|7	|천상병	|8	|55	|105	|보잉 737-800	|제주항공
|7	|천상병	|8	|55	|104	|에어버스 A300	|대한항공
|7	|천상병	|8	|55	|103	|에어버스 A380	|아시아나 항공
|7	|천상병	|8	|55	|102	|보잉 727	|대한항공
|7	|천상병	|8	|55	|101	|보잉 747	|대한항공
|===

상수나 투플들의 속성에 +, -, *, / 연산자를 포함하는 산술적 표현들을 사용할 수 있습니다. 다음 질의는 모든 파일럿의 등급을 1등급씩 올린 릴레이션을 만듭니다.

[source, sql]
----
SELECT PassengerName, Grade + 1, Age
FROM Passenger
----

결과는 아래와 같습니다.

[%header, cols="2, 1, 1" width=50% options=header]
|===
|PilotName	|Grade + 1	|Age
|홍길동	|2	|44
|이순신	|11	|44
|안중근	|8	|32
|김영랑	|10	|54
|김소월	|10	|45
|윤동주	|11	|26
|천상병	|9	|55
|===

link:./14_expression_n_string_in_sql.adoc[다음: SQL내의 수식과 문자열]