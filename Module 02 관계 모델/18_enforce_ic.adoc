= 무결성 제약조건 집행

* 제약조건은 릴레이션 스키마에 정의되고 릴레이션의 수정될 때 집행됨
* 도메인 무결성과 개체 무결성은 직관적으로 즉시 집행됨
** 제약조건을 위배하는 삽입, 삭제, 갱신 명령은 즉시 거부됨
* 참조 무결성 집행 단계
** 참조하는 릴레이션에 없는 값에 대한 삽입이 시도되는 경우
** 명령이 거부됨
** 참조 릴레이션의 데이터가 삭제되는 경우
** 외래 키가 존재하는 릴레이션의 참조 데이터를 모두 삭제
** 참조 릴레이션의 데이터를 삭제할 수 없도록 명령을 거부
** 외래 키가 존재하는 릴레이션의 해당 데이터를 모두 다른 값으로 갱신
** 참조하는 릴레이션의 데이터가 변경되는 경우
** 세 가지 방법 중 하나를 선택

---

제약조건들은 릴레이션 스키마에 정의되고 생성할 때 명세되며 릴레이션이 수정될 때 집행됩니다. 도메인 무결성을 유지하기 위한 도메인 제약조건과 개체 무결성을 유지하기 위한 기본 키 제약조건과 Unique 제약조건은 직관적으로, 이들 제약조건을 위배하는 삽입, 삭제, 갱신 명령은 즉시 거부됩니다. 

참조 무결성을 유지하기 위한 외래 키 제약조건은 복잡해서, 단순히 명령을 거부할 수도 있고 제약조건을 위배하지 않도록 수정될 수 있습니다. 이는 참조 무결성 집행 단계에 따릅니다.
 
image:./images/image10.png[]

그림과 같이 Category 릴레이션을 참조하는 Product 릴레이션이 있고, Product 릴레이션의 CategoryNo 필드가 Category 릴레이션의 CategoryName 필드를 참조하는 경우,

. Category 릴레이션에는 없는 CategoryName 값을 가진 Product 투플이 삽입될 경우
+
이 경우 삽입을 거부합니다.
+
. Category 릴레이션의 투플이 삭제되는 경우
A. 삭제될 Category 투플을 참조하는 모든 Product 투플을 삭제합니다.
B. 삭제될 Category 릴레이션을 참조하는 Product 투플이 있는 경우, Category 릴레이션의 투플 삭제를 거부합니다.
C. 삭제될 Category 릴레이션을 참조하는 모든 Product 투플의 데이터를 모두 다른 값으로 갱신합니다.
. Category 릴레이션의 투플이 변경되는 경우
A. 변경될 Category 투플을 참조하는 모든 Product 투플을 삭제합니다.
B. 변경될 Category 릴레이션을 참조하는 Product 투플이 있는 경우, Category 릴레이션의 투플 삭제를 거부합니다.
C. 변경될 Category 릴레이션을 참조하는 모든 Product 투플의 데이터를 모두 변경되는 값으로 갱신합니다.

link:./19_query.adoc[다음: 관계형 데이터베이스 질의]